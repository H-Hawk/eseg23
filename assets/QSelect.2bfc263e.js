import{b as st,c as Ht,d as It,e as Rt,f as Dt,g as xl,h as kl,i as qt,j as ql}from"./use-key-composition.83756727.js";import{p as Pe,ad as Vl,ae as pl,c as h,af as El,g as He,h as q,Q as Qe,ag as Al,R as Tl,G as se,ac as fe,H as Kt,r as M,w as re,ah as Bl,B as $t,ai as at,k as Ie,aj as jt,ak as Vt,v as Se,al as Ol,q as zl,u as de,am as _l,an as Fl,N as Ml,O as Ll,K as _e,ao as Pl,ap as Hl,a3 as lt,aq as Ae,I as Il,J as Rl}from"./index.f4d69efd.js";import{u as Nt,a as Wt}from"./use-dark.ad0b3c4d.js";import{e as Dl,f as Qt,h as Ut,v as pt,i as Kl,j as Xt,u as Yt,a as Gt,k as Jt,l as $l,m as jl,n as Zt,o as el,p as Et,q as Nl,r as At,g as Wl,s as Ql,t as Ul,c as Xl,b as Yl,w as Gl,Q as Jl,x as Zl,y as en}from"./position-engine.dec26382.js";let Ue=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Ue=e.scrollLeft>=0,e.remove()}var tn=Pe({name:"QField",inheritAttrs:!1,props:st,emits:Ht,setup(){return It(Rt())}});const ln={xs:8,sm:10,md:14,lg:20,xl:24};var nn=Pe({name:"QChip",props:{...Nt,...Vl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:i}){const{proxy:{$q:c}}=He(),g=Wt(e,c),o=pl(e,ln),k=h(()=>e.selected===!0||e.icon!==void 0),C=h(()=>e.selected===!0?e.iconSelected||c.iconSet.chip.selected:e.icon),w=h(()=>e.iconRemove||c.iconSet.chip.remove),E=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=h(()=>{const p=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(p?` text-${p} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(E.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(g.value===!0?" q-chip--dark q-dark":"")}),b=h(()=>{const p=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},K={...p,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||c.lang.label.remove};return{chip:p,remove:K}});function A(p){p.keyCode===13&&V(p)}function V(p){e.disable||(i("update:selected",!e.selected),i("click",p))}function H(p){(p.keyCode===void 0||p.keyCode===13)&&(se(p),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function F(){const p=[];E.value===!0&&p.push(q("div",{class:"q-focus-helper"})),k.value===!0&&p.push(q(Qe,{class:"q-chip__icon q-chip__icon--left",name:C.value}));const K=e.label!==void 0?[q("div",{class:"ellipsis"},[e.label])]:void 0;return p.push(q("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Al(l.default,K))),e.iconRight&&p.push(q(Qe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&p.push(q(Qe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:w.value,...b.value.remove,onClick:H,onKeyup:H})),p}return()=>{if(e.modelValue===!1)return;const p={class:d.value,style:o.value};return E.value===!0&&Object.assign(p,b.value.chip,{onClick:V,onKeyup:A}),El("div",p,F(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Tl,e.ripple]])}}});const we=[];let Be;function on(e){Be=e.keyCode===27}function un(){Be===!0&&(Be=!1)}function an(e){Be===!0&&(Be=!1,Kt(e,27)===!0&&we[we.length-1](e))}function tl(e){window[e]("keydown",on),window[e]("blur",un),window[e]("keyup",an),Be=!1}function ll(e){fe.is.desktop===!0&&(we.push(e),we.length===1&&tl("addEventListener"))}function Xe(e){const l=we.indexOf(e);l>-1&&(we.splice(l,1),we.length===0&&tl("removeEventListener"))}const be=[];function nl(e){be[be.length-1](e)}function ol(e){fe.is.desktop===!0&&(be.push(e),be.length===1&&document.body.addEventListener("focusin",nl))}function rt(e){const l=be.indexOf(e);l>-1&&(be.splice(l,1),be.length===0&&document.body.removeEventListener("focusin",nl))}var rn=Pe({name:"QMenu",inheritAttrs:!1,props:{...Dl,...Qt,...Nt,...Ut,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:pt},self:{type:String,validator:pt},offset:{type:Array,validator:Kl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Xt,"click","escapeKey"],setup(e,{slots:l,emit:i,attrs:c}){let g=null,o,k,C;const w=He(),{proxy:E}=w,{$q:d}=E,b=M(null),A=M(!1),V=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),H=Wt(e,d),{registerTick:F,removeTick:p}=Yt(),{registerTimeout:K}=Gt(),{transitionProps:I,transitionStyle:W}=Jt(e),{localScrollTarget:z,changeScrollEvent:_,unconfigureScrollTarget:U}=$l(e,y),{anchorEl:$,canShow:le}=jl({showing:A}),{hide:ne}=Zt({showing:A,canShow:le,handleShow:r,handleHide:a,hideOnRouteChange:V,processOnMount:!0}),{showPortal:G,hidePortal:R,renderPortal:oe}=el(w,b,L,"menu"),Z={anchorEl:$,innerRef:b,onClickOutside(n){if(e.persistent!==!0&&A.value===!0)return ne(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&se(n),!0}},ie=h(()=>Et(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),ee=h(()=>e.cover===!0?ie.value:Et(e.self||"top start",d.lang.rtl)),j=h(()=>(e.square===!0?" q-menu--square":"")+(H.value===!0?" q-menu--dark q-dark":"")),ue=h(()=>e.autoClose===!0?{onClick:B}:{}),J=h(()=>A.value===!0&&e.persistent!==!0);re(J,n=>{n===!0?(ll(f),Nl(Z)):(Xe(f),At(Z))});function X(){Dt(()=>{let n=b.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function r(n){if(g=e.noRefocus===!1?document.activeElement:null,ol(m),G(),y(),o=void 0,n!==void 0&&(e.touchPosition||e.contextMenu)){const D=Bl(n);if(D.left!==void 0){const{top:ce,left:ve}=$.value.getBoundingClientRect();o={left:D.left-ve,top:D.top-ce}}}k===void 0&&(k=re(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,S)),e.noFocus!==!0&&document.activeElement.blur(),F(()=>{S(),e.noFocus!==!0&&X()}),K(()=>{d.platform.is.ios===!0&&(C=e.autoClose,b.value.click()),S(),G(!0),i("show",n)},e.transitionDuration)}function a(n){p(),R(),v(!0),g!==null&&(n===void 0||n.qClickOutside!==!0)&&(((n&&n.type.indexOf("key")===0?g.closest('[tabindex]:not([tabindex^="-"])'):void 0)||g).focus(),g=null),K(()=>{R(!0),i("hide",n)},e.transitionDuration)}function v(n){o=void 0,k!==void 0&&(k(),k=void 0),(n===!0||A.value===!0)&&(rt(m),U(),At(Z),Xe(f)),n!==!0&&(g=null)}function y(){($.value!==null||e.scrollTarget!==void 0)&&(z.value=Wl($.value,e.scrollTarget),_(z.value,S))}function B(n){C!==!0?(Ql(E,n),i("click",n)):C=!1}function m(n){J.value===!0&&e.noFocus!==!0&&jt(b.value,n.target)!==!0&&X()}function f(n){i("escapeKey"),ne(n)}function S(){const n=b.value;n===null||$.value===null||Ul({el:n,offset:e.offset,anchorEl:$.value,anchorOrigin:ie.value,selfOrigin:ee.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function L(){return q(at,I.value,()=>A.value===!0?q("div",{role:"menu",...c,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+j.value,c.class],style:[c.style,W.value],...ue.value},$t(l.default)):null)}return Ie(v),Object.assign(E,{focus:X,updatePosition:S}),oe}});function sn(e,l,i){let c;function g(){c!==void 0&&(Vt.remove(c),c=void 0)}return Ie(()=>{e.value===!0&&g()}),{removeFromHistory:g,addToHistory(){c={condition:()=>i.value===!0,handler:l},Vt.add(c)}}}let Fe=0,nt,ot,Le,it=!1,Tt,Bt,Ot,ye=null;function cn(e){dn(e)&&se(e)}function dn(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const l=Ol(e),i=e.shiftKey&&!e.deltaX,c=!i&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),g=i||c?e.deltaY:e.deltaX;for(let o=0;o<l.length;o++){const k=l[o];if(Gl(k,c))return c?g<0&&k.scrollTop===0?!0:g>0&&k.scrollTop+k.clientHeight===k.scrollHeight:g<0&&k.scrollLeft===0?!0:g>0&&k.scrollLeft+k.clientWidth===k.scrollWidth}return!0}function zt(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ne(e){it!==!0&&(it=!0,requestAnimationFrame(()=>{it=!1;const{height:l}=e.target,{clientHeight:i,scrollTop:c}=document.scrollingElement;(Le===void 0||l!==window.innerHeight)&&(Le=i-l,document.scrollingElement.scrollTop=c),c>Le&&(document.scrollingElement.scrollTop-=Math.ceil((c-Le)/8))}))}function _t(e){const l=document.body,i=window.visualViewport!==void 0;if(e==="add"){const{overflowY:c,overflowX:g}=window.getComputedStyle(l);nt=Xl(window),ot=Yl(window),Tt=l.style.left,Bt=l.style.top,Ot=window.location.href,l.style.left=`-${nt}px`,l.style.top=`-${ot}px`,g!=="hidden"&&(g==="scroll"||l.scrollWidth>window.innerWidth)&&l.classList.add("q-body--force-scrollbar-x"),c!=="hidden"&&(c==="scroll"||l.scrollHeight>window.innerHeight)&&l.classList.add("q-body--force-scrollbar-y"),l.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,fe.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ne,Se.passiveCapture),window.visualViewport.addEventListener("scroll",Ne,Se.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",zt,Se.passiveCapture))}fe.is.desktop===!0&&fe.is.mac===!0&&window[`${e}EventListener`]("wheel",cn,Se.notPassive),e==="remove"&&(fe.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",Ne,Se.passiveCapture),window.visualViewport.removeEventListener("scroll",Ne,Se.passiveCapture)):window.removeEventListener("scroll",zt,Se.passiveCapture)),l.classList.remove("q-body--prevent-scroll"),l.classList.remove("q-body--force-scrollbar-x"),l.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,l.style.left=Tt,l.style.top=Bt,window.location.href===Ot&&window.scrollTo(nt,ot),Le=void 0)}function fn(e){let l="add";if(e===!0){if(Fe++,ye!==null){clearTimeout(ye),ye=null;return}if(Fe>1)return}else{if(Fe===0||(Fe--,Fe>0))return;if(l="remove",fe.is.ios===!0&&fe.is.nativeMobile===!0){ye!==null&&clearTimeout(ye),ye=setTimeout(()=>{_t(l),ye=null},100);return}}_t(l)}function vn(){let e;return{preventBodyScroll(l){l!==e&&(e!==void 0||l===!0)&&(e=l,fn(l))}}}let We=0;const mn={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Ft={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var hn=Pe({name:"QDialog",inheritAttrs:!1,props:{...Qt,...Ut,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Xt,"shake","click","escapeKey"],setup(e,{slots:l,emit:i,attrs:c}){const g=He(),o=M(null),k=M(!1),C=M(!1);let w=null,E=null,d,b;const A=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:V}=vn(),{registerTimeout:H}=Gt(),{registerTick:F,removeTick:p}=Yt(),{transitionProps:K,transitionStyle:I}=Jt(e,()=>Ft[e.position][0],()=>Ft[e.position][1]),{showPortal:W,hidePortal:z,portalIsAccessible:_,renderPortal:U}=el(g,o,B,"dialog"),{hide:$}=Zt({showing:k,hideOnRouteChange:A,handleShow:ie,handleHide:ee,processOnMount:!0}),{addToHistory:le,removeFromHistory:ne}=sn(k,$,A),G=h(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${mn[e.position]}`+(C.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),R=h(()=>k.value===!0&&e.seamless!==!0),oe=h(()=>e.autoClose===!0?{onClick:a}:{}),Z=h(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${R.value===!0?"modal":"seamless"}`,c.class]);re(()=>e.maximized,m=>{k.value===!0&&r(m)}),re(R,m=>{V(m),m===!0?(ol(y),ll(J)):(rt(y),Xe(J))});function ie(m){le(),E=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,r(e.maximized),W(),C.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),F(j)):p(),H(()=>{if(g.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:f,bottom:S}=document.activeElement.getBoundingClientRect(),{innerHeight:L}=window,n=window.visualViewport!==void 0?window.visualViewport.height:L;f>0&&S>n/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-n,S>=L?1/0:Math.ceil(document.scrollingElement.scrollTop+S-n/2))),document.activeElement.scrollIntoView()}b=!0,o.value.click(),b=!1}W(!0),C.value=!1,i("show",m)},e.transitionDuration)}function ee(m){p(),ne(),X(!0),C.value=!0,z(),E!==null&&(((m&&m.type.indexOf("key")===0?E.closest('[tabindex]:not([tabindex^="-"])'):void 0)||E).focus(),E=null),H(()=>{z(!0),C.value=!1,i("hide",m)},e.transitionDuration)}function j(m){Dt(()=>{let f=o.value;f===null||f.contains(document.activeElement)===!0||(f=(m!==""?f.querySelector(m):null)||f.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||f.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||f.querySelector("[autofocus], [data-autofocus]")||f,f.focus({preventScroll:!0}))})}function ue(m){m&&typeof m.focus=="function"?m.focus({preventScroll:!0}):j(),i("shake");const f=o.value;f!==null&&(f.classList.remove("q-animate--scale"),f.classList.add("q-animate--scale"),w!==null&&clearTimeout(w),w=setTimeout(()=>{w=null,o.value!==null&&(f.classList.remove("q-animate--scale"),j())},170))}function J(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&ue():(i("escapeKey"),$()))}function X(m){w!==null&&(clearTimeout(w),w=null),(m===!0||k.value===!0)&&(r(!1),e.seamless!==!0&&(V(!1),rt(y),Xe(J))),m!==!0&&(E=null)}function r(m){m===!0?d!==!0&&(We<1&&document.body.classList.add("q-body--dialog"),We++,d=!0):d===!0&&(We<2&&document.body.classList.remove("q-body--dialog"),We--,d=!1)}function a(m){b!==!0&&($(m),i("click",m))}function v(m){e.persistent!==!0&&e.noBackdropDismiss!==!0?$(m):e.noShake!==!0&&ue()}function y(m){e.allowFocusOutside!==!0&&_.value===!0&&jt(o.value,m.target)!==!0&&j('[tabindex]:not([tabindex="-1"])')}Object.assign(g.proxy,{focus:j,shake:ue,__updateRefocusTarget(m){E=m||null}}),Ie(X);function B(){return q("div",{role:"dialog","aria-modal":R.value===!0?"true":"false",...c,class:Z.value},[q(at,{name:"q-transition--fade",appear:!0},()=>R.value===!0?q("div",{class:"q-dialog__backdrop fixed-full",style:I.value,"aria-hidden":"true",tabindex:-1,onClick:v}):null),q(at,K.value,()=>k.value===!0?q("div",{ref:o,class:G.value,style:I.value,tabindex:-1,...oe.value},$t(l.default)):null)])}return U}});const te=1e3,gn=["start","center","end","start-force","center-force","end-force"],il=Array.prototype.filter,Sn=window.getComputedStyle(document.body).overflowAnchor===void 0?zl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];il.call(i,g=>g.dataset&&g.dataset.qVsAnchor!==void 0).forEach(g=>{delete g.dataset.qVsAnchor});const c=i[l];c&&c.dataset&&(c.dataset.qVsAnchor="")}))};function Te(e,l){return e+l}function ut(e,l,i,c,g,o,k,C){const w=e===window?document.scrollingElement||document.documentElement:e,E=g===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-k-C,scrollMaxSize:0,offsetStart:-k,offsetEnd:-C};if(g===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=w.scrollLeft,d.scrollViewSize+=w.clientWidth),d.scrollMaxSize=w.scrollWidth,o===!0&&(d.scrollStart=(Ue===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=w.scrollTop,d.scrollViewSize+=w.clientHeight),d.scrollMaxSize=w.scrollHeight),i!==null)for(let b=i.previousElementSibling;b!==null;b=b.previousElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=b[E]);if(c!==null)for(let b=c.nextElementSibling;b!==null;b=b.nextElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=b[E]);if(l!==e){const b=w.getBoundingClientRect(),A=l.getBoundingClientRect();g===!0?(d.offsetStart+=A.left-b.left,d.offsetEnd-=A.width):(d.offsetStart+=A.top-b.top,d.offsetEnd-=A.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function Mt(e,l,i,c){l==="end"&&(l=(e===window?document.body:e)[i===!0?"scrollWidth":"scrollHeight"]),e===window?i===!0?(c===!0&&(l=(Ue===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):i===!0?(c===!0&&(l=(Ue===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Me(e,l,i,c){if(i>=c)return 0;const g=l.length,o=Math.floor(i/te),k=Math.floor((c-1)/te)+1;let C=e.slice(o,k).reduce(Te,0);return i%te!==0&&(C-=l.slice(o*te,i).reduce(Te,0)),c%te!==0&&c!==g&&(C-=l.slice(c,k*te).reduce(Te,0)),C}const yn={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},wn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...yn};function bn({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:i,virtualScrollItemSizeComputed:c}){const g=He(),{props:o,emit:k,proxy:C}=g,{$q:w}=C;let E,d,b,A=[],V;const H=M(0),F=M(0),p=M({}),K=M(null),I=M(null),W=M(null),z=M({from:0,to:0}),_=h(()=>o.tableColspan!==void 0?o.tableColspan:100);c===void 0&&(c=h(()=>o.virtualScrollItemSize));const U=h(()=>c.value+";"+o.virtualScrollHorizontal),$=h(()=>U.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);re($,()=>{j()}),re(U,le);function le(){ee(d,!0)}function ne(a){ee(a===void 0?d:a)}function G(a,v){const y=l();if(y==null||y.nodeType===8)return;const B=ut(y,i(),K.value,I.value,o.virtualScrollHorizontal,w.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);b!==B.scrollViewSize&&j(B.scrollViewSize),oe(y,B,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,gn.indexOf(v)>-1?v:d>-1&&a>d?"end":"start")}function R(){const a=l();if(a==null||a.nodeType===8)return;const v=ut(a,i(),K.value,I.value,o.virtualScrollHorizontal,w.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),y=e.value-1,B=v.scrollMaxSize-v.offsetStart-v.offsetEnd-F.value;if(E===v.scrollStart)return;if(v.scrollMaxSize<=0){oe(a,v,0,0);return}b!==v.scrollViewSize&&j(v.scrollViewSize),Z(z.value.from);const m=Math.floor(v.scrollMaxSize-Math.max(v.scrollViewSize,v.offsetEnd)-Math.min(V[y],v.scrollViewSize/2));if(m>0&&Math.ceil(v.scrollStart)>=m){oe(a,v,y,v.scrollMaxSize-v.offsetEnd-A.reduce(Te,0));return}let f=0,S=v.scrollStart-v.offsetStart,L=S;if(S<=B&&S+v.scrollViewSize>=H.value)S-=H.value,f=z.value.from,L=S;else for(let n=0;S>=A[n]&&f<y;n++)S-=A[n],f+=te;for(;S>0&&f<y;)S-=V[f],S>-v.scrollViewSize?(f++,L=S):L=V[f]+S;oe(a,v,f,L)}function oe(a,v,y,B,m){const f=typeof m=="string"&&m.indexOf("-force")>-1,S=f===!0?m.replace("-force",""):m,L=S!==void 0?S:"start";let n=Math.max(0,y-p.value[L]),D=n+p.value.total;D>e.value&&(D=e.value,n=Math.max(0,D-p.value.total)),E=v.scrollStart;const ce=n!==z.value.from||D!==z.value.to;if(ce===!1&&S===void 0){J(y);return}const{activeElement:ve}=document,ae=W.value;ce===!0&&ae!==null&&ae!==ve&&ae.contains(ve)===!0&&(ae.addEventListener("focusout",ie),setTimeout(()=>{ae!==null&&ae.removeEventListener("focusout",ie)})),Sn(ae,y-n);const Re=S!==void 0?V.slice(n,y).reduce(Te,0):0;if(ce===!0){const me=D>=z.value.from&&n<=z.value.to?z.value.to:D;z.value={from:n,to:me},H.value=Me(A,V,0,n),F.value=Me(A,V,D,e.value),requestAnimationFrame(()=>{z.value.to!==D&&E===v.scrollStart&&(z.value={from:z.value.from,to:D},F.value=Me(A,V,D,e.value))})}requestAnimationFrame(()=>{if(E!==v.scrollStart)return;ce===!0&&Z(n);const me=V.slice(n,y).reduce(Te,0),Ce=me+v.offsetStart+H.value,De=Ce+V[y];let Oe=Ce+B;if(S!==void 0){const Ye=me-Re,Q=v.scrollStart+Ye;Oe=f!==!0&&Q<Ce&&De<Q+v.scrollViewSize?Q:S==="end"?De-v.scrollViewSize:Ce-(S==="start"?0:Math.round((v.scrollViewSize-V[y])/2))}E=Oe,Mt(a,Oe,o.virtualScrollHorizontal,w.lang.rtl),J(y)})}function Z(a){const v=W.value;if(v){const y=il.call(v.children,n=>n.classList&&n.classList.contains("q-virtual-scroll--skip")===!1),B=y.length,m=o.virtualScrollHorizontal===!0?n=>n.getBoundingClientRect().width:n=>n.offsetHeight;let f=a,S,L;for(let n=0;n<B;){for(S=m(y[n]),n++;n<B&&y[n].classList.contains("q-virtual-scroll--with-prev")===!0;)S+=m(y[n]),n++;L=S-V[f],L!==0&&(V[f]+=L,A[Math.floor(f/te)]+=L),f++}}}function ie(){W.value!==null&&W.value!==void 0&&W.value.focus()}function ee(a,v){const y=1*c.value;(v===!0||Array.isArray(V)===!1)&&(V=[]);const B=V.length;V.length=e.value;for(let f=e.value-1;f>=B;f--)V[f]=y;const m=Math.floor((e.value-1)/te);A=[];for(let f=0;f<=m;f++){let S=0;const L=Math.min((f+1)*te,e.value);for(let n=f*te;n<L;n++)S+=V[n];A.push(S)}d=-1,E=void 0,H.value=Me(A,V,0,z.value.from),F.value=Me(A,V,z.value.to,e.value),a>=0?(Z(z.value.from),de(()=>{G(a)})):X()}function j(a){if(a===void 0&&typeof window!="undefined"){const S=l();S!=null&&S.nodeType!==8&&(a=ut(S,i(),K.value,I.value,o.virtualScrollHorizontal,w.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}b=a;const v=parseFloat(o.virtualScrollSliceRatioBefore)||0,y=parseFloat(o.virtualScrollSliceRatioAfter)||0,B=1+v+y,m=a===void 0||a<=0?1:Math.ceil(a/c.value),f=Math.max(1,m,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/B));p.value={total:Math.ceil(f*B),start:Math.ceil(f*v),center:Math.ceil(f*(.5+v)),end:Math.ceil(f*(1+v)),view:m}}function ue(a,v){const y=o.virtualScrollHorizontal===!0?"width":"height",B={["--q-virtual-scroll-item-"+y]:c.value+"px"};return[a==="tbody"?q(a,{class:"q-virtual-scroll__padding",key:"before",ref:K},[q("tr",[q("td",{style:{[y]:`${H.value}px`,...B},colspan:_.value})])]):q(a,{class:"q-virtual-scroll__padding",key:"before",ref:K,style:{[y]:`${H.value}px`,...B}}),q(a,{class:"q-virtual-scroll__content",key:"content",ref:W,tabindex:-1},v.flat()),a==="tbody"?q(a,{class:"q-virtual-scroll__padding",key:"after",ref:I},[q("tr",[q("td",{style:{[y]:`${F.value}px`,...B},colspan:_.value})])]):q(a,{class:"q-virtual-scroll__padding",key:"after",ref:I,style:{[y]:`${F.value}px`,...B}})]}function J(a){d!==a&&(o.onVirtualScroll!==void 0&&k("virtualScroll",{index:a,from:z.value.from,to:z.value.to-1,direction:a<d?"decrease":"increase",ref:C}),d=a)}j();const X=_l(R,w.platform.is.ios===!0?120:35);Fl(()=>{j()});let r=!1;return Ml(()=>{r=!0}),Ll(()=>{if(r!==!0)return;const a=l();E!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?Mt(a,E,o.virtualScrollHorizontal,w.lang.rtl):G(d)}),Ie(()=>{X.cancel()}),Object.assign(C,{scrollTo:G,reset:le,refresh:ne}),{virtualScrollSliceRange:z,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:j,onVirtualScrollEvt:X,localResetVirtualScroll:ee,padVirtualScroll:ue,scrollTo:G,reset:le,refresh:ne}}function Lt(e,l,i){if(i<=l)return l;const c=i-l+1;let g=l+(e-l)%c;return g<l&&(g=c+g),g===0?0:g}const Pt=e=>["add","add-unique","toggle"].includes(e),Cn=".*+?^${}()|[]\\",xn=Object.keys(st);var En=Pe({name:"QSelect",inheritAttrs:!1,props:{...wn,...xl,...st,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Pt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Ht,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:i}){const{proxy:c}=He(),{$q:g}=c,o=M(!1),k=M(!1),C=M(-1),w=M(""),E=M(!1),d=M(!1);let b=null,A,V,H,F=null,p,K,I,W;const z=M(null),_=M(null),U=M(null),$=M(null),le=M(null),ne=kl(e),G=ql(wt),R=h(()=>Array.isArray(e.options)?e.options.length:0),oe=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Z,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:ee,padVirtualScroll:j,onVirtualScrollEvt:ue,scrollTo:J,setVirtualScrollSize:X}=bn({virtualScrollLength:R,getVirtualScrollTarget:sl,getVirtualScrollEl:St,virtualScrollItemSizeComputed:oe}),r=Rt(),a=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&A!==void 0?A:[],x=s.map(O=>rl(O,u));return e.modelValue===null&&t===!0?x.filter(O=>O!==null):x}return s}),v=h(()=>{const t={};return xn.forEach(s=>{const u=e[s];u!==void 0&&(t[s]=u)}),t}),y=h(()=>e.optionsDark===null?r.isDark.value:e.optionsDark),B=h(()=>qt(a.value)),m=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||a.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),f=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),S=h(()=>R.value===0),L=h(()=>a.value.map(t=>Y.value(t)).join(", ")),n=h(()=>e.displayValue!==void 0?e.displayValue:L.value),D=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ce=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||a.value.some(D.value))),ve=h(()=>r.focused.value===!0?e.tabindex:-1),ae=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${r.targetUid.value}_lb`};return C.value>=0&&(t["aria-activedescendant"]=`${r.targetUid.value}_${C.value}`),t}),Re=h(()=>({id:`${r.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),me=h(()=>a.value.map((t,s)=>({index:s,opt:t,html:D.value(t),selected:!0,removeAtIndex:al,toggleOption:he,tabindex:ve.value}))),Ce=h(()=>{if(R.value===0)return[];const{from:t,to:s}=Z.value;return e.options.slice(t,s).map((u,x)=>{const O=xe.value(u)===!0,T=t+x,P={clickable:!0,active:!1,activeClass:Ye.value,manualFocus:!0,focused:!1,disable:O,tabindex:-1,dense:e.optionsDense,dark:y.value,role:"option",id:`${r.targetUid.value}_${T}`,onClick:()=>{he(u)}};return O!==!0&&(Ze(u)===!0&&(P.active=!0),C.value===T&&(P.focused=!0),P["aria-selected"]=P.active===!0?"true":"false",g.platform.is.desktop===!0&&(P.onMousemove=()=>{o.value===!0&&ke(T)})),{index:T,opt:u,html:D.value(u),label:Y.value(u),selected:P.active,focused:P.focused,toggleOption:he,setOptionIndex:ke,itemProps:P}})}),De=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:g.iconSet.arrow.dropdown),Oe=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ye=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Q=h(()=>Je(e.optionValue,"value")),Y=h(()=>Je(e.optionLabel,"label")),xe=h(()=>Je(e.optionDisable,"disable")),Ke=h(()=>a.value.map(t=>Q.value(t))),ul=h(()=>{const t={onInput:wt,onChange:G,onKeydown:gt,onKeyup:mt,onKeypress:ht,onFocus:ft,onClick(s){V===!0&&Ae(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=G,t});re(a,t=>{A=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&r.innerLoading.value!==!0&&(k.value!==!0&&o.value!==!0||B.value!==!0)&&(H!==!0&&Ee(),(k.value===!0||o.value===!0)&&qe(""))},{immediate:!0}),re(()=>e.fillInput,Ee),re(o,et),re(R,Cl);function ct(t){return e.emitValue===!0?Q.value(t):t}function Ge(t){if(t>-1&&t<a.value.length)if(e.multiple===!0){const s=e.modelValue.slice();i("remove",{index:t,value:s.splice(t,1)[0]}),i("update:modelValue",s)}else i("update:modelValue",null)}function al(t){Ge(t),r.focus()}function dt(t,s){const u=ct(t);if(e.multiple!==!0){e.fillInput===!0&&ze(Y.value(t),!0,!0),i("update:modelValue",u);return}if(a.value.length===0){i("add",{index:0,value:u}),i("update:modelValue",e.multiple===!0?[u]:u);return}if(s===!0&&Ze(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const x=e.modelValue.slice();i("add",{index:x.length,value:u}),x.push(u),i("update:modelValue",x)}function he(t,s){if(r.editable.value!==!0||t===void 0||xe.value(t)===!0)return;const u=Q.value(t);if(e.multiple!==!0){s!==!0&&(ze(e.fillInput===!0?Y.value(t):"",!0,!0),ge()),_.value!==null&&_.value.focus(),(a.value.length===0||_e(Q.value(a.value[0]),u)!==!0)&&i("update:modelValue",e.emitValue===!0?u:t);return}if((V!==!0||E.value===!0)&&r.focus(),ft(),a.value.length===0){const T=e.emitValue===!0?u:t;i("add",{index:0,value:T}),i("update:modelValue",e.multiple===!0?[T]:T);return}const x=e.modelValue.slice(),O=Ke.value.findIndex(T=>_e(T,u));if(O>-1)i("remove",{index:O,value:x.splice(O,1)[0]});else{if(e.maxValues!==void 0&&x.length>=e.maxValues)return;const T=e.emitValue===!0?u:t;i("add",{index:x.length,value:T}),x.push(T)}i("update:modelValue",x)}function ke(t){if(g.platform.is.desktop!==!0)return;const s=t>-1&&t<R.value?t:-1;C.value!==s&&(C.value=s)}function $e(t=1,s){if(o.value===!0){let u=C.value;do u=Lt(u+t,-1,R.value-1);while(u!==-1&&u!==C.value&&xe.value(e.options[u])===!0);C.value!==u&&(ke(u),J(u),s!==!0&&e.useInput===!0&&e.fillInput===!0&&je(u>=0?Y.value(e.options[u]):p))}}function rl(t,s){const u=x=>_e(Q.value(x),t);return e.options.find(u)||s.find(u)||t}function Je(t,s){const u=t!==void 0?t:s;return typeof u=="function"?u:x=>x!==null&&typeof x=="object"&&u in x?x[u]:x}function Ze(t){const s=Q.value(t);return Ke.value.find(u=>_e(u,s))!==void 0}function ft(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===L.value)&&_.value.select()}function vt(t){Kt(t,27)===!0&&o.value===!0&&(Ae(t),ge(),Ee()),i("keyup",t)}function mt(t){const{value:s}=t.target;if(t.keyCode!==void 0){vt(t);return}if(t.target.value="",b!==null&&(clearTimeout(b),b=null),Ee(),typeof s=="string"&&s.length!==0){const u=s.toLocaleLowerCase(),x=T=>{const P=e.options.find(N=>T.value(N).toLocaleLowerCase()===u);return P===void 0?!1:(a.value.indexOf(P)===-1?he(P):ge(),!0)},O=T=>{x(Q)!==!0&&(x(Y)===!0||T===!0||qe(s,!0,()=>O(!0)))};O()}else r.clearValue(t)}function ht(t){i("keypress",t)}function gt(t){if(i("keydown",t),Il(t)===!0)return;const s=w.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(C.value>-1||s===!0);if(t.keyCode===27){lt(t);return}if(t.keyCode===9&&u===!1){Ve();return}if(t.target===void 0||t.target.id!==r.targetUid.value)return;if(t.keyCode===40&&r.innerLoading.value!==!0&&o.value===!1){se(t),pe();return}if(t.keyCode===8&&e.hideSelected!==!0&&w.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ge(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof w.value!="string"||w.value.length===0)&&(se(t),C.value=-1,$e(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ie.value!==void 0&&(se(t),C.value=Math.max(-1,Math.min(R.value,C.value+(t.keyCode===33?-1:1)*ie.value.view)),$e(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(se(t),$e(t.keyCode===38?-1:1,e.multiple));const x=R.value;if((I===void 0||W<Date.now())&&(I=""),x>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||I.length!==0)){o.value!==!0&&pe(t);const O=t.key.toLocaleLowerCase(),T=I.length===1&&I[0]===O;W=Date.now()+1500,T===!1&&(se(t),I+=O);const P=new RegExp("^"+I.split("").map(tt=>Cn.indexOf(tt)>-1?"\\"+tt:tt).join(".*"),"i");let N=C.value;if(T===!0||N<0||P.test(Y.value(e.options[N]))!==!0)do N=Lt(N+1,-1,x-1);while(N!==C.value&&(xe.value(e.options[N])===!0||P.test(Y.value(e.options[N]))!==!0));C.value!==N&&de(()=>{ke(N),J(N),N>=0&&e.useInput===!0&&e.fillInput===!0&&je(Y.value(e.options[N]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||I!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&se(t),C.value>-1&&C.value<x){he(e.options[C.value]);return}if(s===!0){const O=(T,P)=>{if(P){if(Pt(P)!==!0)return}else P=e.newValueMode;if(T==null)return;ze("",e.multiple!==!0,!0),(P==="toggle"?he:dt)(T,P==="add-unique"),e.multiple!==!0&&(_.value!==null&&_.value.focus(),ge())};if(e.onNewValue!==void 0?i("newValue",w.value,O):O(w.value),e.multiple!==!0)return}o.value===!0?Ve():r.innerLoading.value!==!0&&pe()}}function St(){return V===!0?le.value:U.value!==null&&U.value.contentEl!==null?U.value.contentEl:void 0}function sl(){return St()}function cl(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?me.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?me.value.map((t,s)=>q(nn,{key:"option-"+s,removable:r.editable.value===!0&&xe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ve.value,onRemove(){t.removeAtIndex(s)}},()=>q("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Y.value(t.opt)}))):[q("span",{[ce.value===!0?"innerHTML":"textContent"]:n.value})]}function yt(){if(S.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:w.value}):void 0;const t=l.option!==void 0?l.option:u=>q(en,{key:u.index,...u.itemProps},()=>q(Jl,()=>q(Zl,()=>q("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let s=j("div",Ce.value.map(t));return l["before-options"]!==void 0&&(s=l["before-options"]().concat(s)),Rl(l["after-options"],s)}function dl(t,s){const u=s===!0?{...ae.value,...r.splitAttrs.attributes.value}:void 0,x={ref:s===!0?_:void 0,key:"i_t",class:m.value,style:e.inputStyle,value:w.value!==void 0?w.value:"",type:"search",...u,id:s===!0?r.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ul.value};return t!==!0&&V===!0&&(Array.isArray(x.class)===!0?x.class=[...x.class,"no-pointer-events"]:x.class+=" no-pointer-events"),q("input",x)}function wt(t){b!==null&&(clearTimeout(b),b=null),!(t&&t.target&&t.target.qComposing===!0)&&(je(t.target.value||""),H=!0,p=w.value,r.focused.value!==!0&&(V!==!0||E.value===!0)&&r.focus(),e.onFilter!==void 0&&(b=setTimeout(()=>{b=null,qe(w.value)},e.inputDebounce)))}function je(t){w.value!==t&&(w.value=t,i("inputValue",t))}function ze(t,s,u){H=u!==!0,e.useInput===!0&&(je(t),(s===!0||u!==!0)&&(p=t),s!==!0&&qe(t))}function qe(t,s,u){if(e.onFilter===void 0||s!==!0&&r.focused.value!==!0)return;r.innerLoading.value===!0?i("filterAbort"):(r.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&a.value.length!==0&&H!==!0&&t===Y.value(a.value[0])&&(t="");const x=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);F!==null&&clearTimeout(F),F=x,i("filter",t,(O,T)=>{(s===!0||r.focused.value===!0)&&F===x&&(clearTimeout(F),typeof O=="function"&&O(),d.value=!1,de(()=>{r.innerLoading.value=!1,r.editable.value===!0&&(s===!0?o.value===!0&&ge():o.value===!0?et(!0):o.value=!0),typeof T=="function"&&de(()=>{T(c)}),typeof u=="function"&&de(()=>{u(c)})}))},()=>{r.focused.value===!0&&F===x&&(clearTimeout(F),r.innerLoading.value=!1,d.value=!1),o.value===!0&&(o.value=!1)})}function fl(){return q(rn,{ref:U,class:f.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&S.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:y.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Oe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Re.value,onScrollPassive:ue,onBeforeShow:Ct,onBeforeHide:vl,onShow:ml},yt)}function vl(t){xt(t),Ve()}function ml(){X()}function hl(t){Ae(t),_.value!==null&&_.value.focus(),E.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function gl(t){Ae(t),de(()=>{E.value=!1})}function Sl(){const t=[q(tn,{class:`col-auto ${r.fieldClass.value}`,...v.value,for:r.targetUid.value,dark:y.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:w.value.length!==0,...r.splitAttrs.listeners.value,onFocus:hl,onBlur:gl},{...l,rawControl:()=>r.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&t.push(q("div",{ref:le,class:f.value+" scroll",style:e.popupContentStyle,...Re.value,onClick:lt,onScrollPassive:ue},yt())),q(hn,{ref:$,modelValue:k.value,position:e.useInput===!0?"top":void 0,transitionShow:K,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Ct,onBeforeHide:yl,onHide:wl,onShow:bl},()=>q("div",{class:"q-select__dialog"+(y.value===!0?" q-select__dialog--dark q-dark":"")+(E.value===!0?" q-select__dialog--focused":"")},t))}function yl(t){xt(t),$.value!==null&&$.value.__updateRefocusTarget(r.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),r.focused.value=!1}function wl(t){ge(),r.focused.value===!1&&i("blur",t),Ee()}function bl(){const t=document.activeElement;(t===null||t.id!==r.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),X()}function Ve(){k.value!==!0&&(C.value=-1,o.value===!0&&(o.value=!1),r.focused.value===!1&&(F!==null&&(clearTimeout(F),F=null),r.innerLoading.value===!0&&(i("filterAbort"),r.innerLoading.value=!1,d.value=!1)))}function pe(t){r.editable.value===!0&&(V===!0?(r.onControlFocusin(t),k.value=!0,de(()=>{r.focus()})):r.focus(),e.onFilter!==void 0?qe(w.value):(S.value!==!0||l["no-option"]!==void 0)&&(o.value=!0))}function ge(){k.value=!1,Ve()}function Ee(){e.useInput===!0&&ze(e.multiple!==!0&&e.fillInput===!0&&a.value.length!==0&&Y.value(a.value[0])||"",!0,!0)}function et(t){let s=-1;if(t===!0){if(a.value.length!==0){const u=Q.value(a.value[0]);s=e.options.findIndex(x=>_e(Q.value(x),u))}ee(s)}ke(s)}function Cl(t,s){o.value===!0&&r.innerLoading.value===!1&&(ee(-1,!0),de(()=>{o.value===!0&&r.innerLoading.value===!1&&(t>s?ee():et(!0))}))}function bt(){k.value===!1&&U.value!==null&&U.value.updatePosition()}function Ct(t){t!==void 0&&Ae(t),i("popupShow",t),r.hasPopupOpen=!0,r.onControlFocusin(t)}function xt(t){t!==void 0&&Ae(t),i("popupHide",t),r.hasPopupOpen=!1,r.onControlFocusout(t)}function kt(){V=g.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||S.value===!1:!0),K=g.platform.is.ios===!0&&V===!0&&e.useInput===!0?"fade":e.transitionShow}return Pl(kt),Hl(bt),kt(),Ie(()=>{b!==null&&clearTimeout(b)}),Object.assign(c,{showPopup:pe,hidePopup:ge,removeAtIndex:Ge,add:dt,toggleOption:he,getOptionIndex:()=>C.value,setOptionIndex:ke,moveOptionSelection:$e,filter:qe,updateMenuPosition:bt,updateInputValue:ze,isOptionSelected:Ze,getEmittingOptionValue:ct,isOptionDisabled:(...t)=>xe.value.apply(null,t)===!0,getOptionValue:(...t)=>Q.value.apply(null,t),getOptionLabel:(...t)=>Y.value.apply(null,t)}),Object.assign(r,{innerValue:a,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:z,targetRef:_,hasValue:B,showPopup:pe,floatingLabel:h(()=>e.hideSelected!==!0&&B.value===!0||typeof w.value=="number"||w.value.length!==0||qt(e.displayValue)),getControlChild:()=>{if(r.editable.value!==!1&&(k.value===!0||S.value!==!0||l["no-option"]!==void 0))return V===!0?Sl():fl();r.hasPopupOpen===!0&&(r.hasPopupOpen=!1)},controlEvents:{onFocusin(t){r.onControlFocusin(t)},onFocusout(t){r.onControlFocusout(t,()=>{Ee(),Ve()})},onClick(t){if(lt(t),V!==!0&&o.value===!0){Ve(),_.value!==null&&_.value.focus();return}pe(t)}},getControl:t=>{const s=cl(),u=t===!0||k.value!==!0||V!==!0;if(e.useInput===!0)s.push(dl(t,u));else if(r.editable.value===!0){const O=u===!0?ae.value:void 0;s.push(q("input",{ref:u===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?r.targetUid.value:void 0,value:n.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...O,onKeydown:gt,onKeyup:vt,onKeypress:ht})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&s.push(q("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:mt}))}if(ne.value!==void 0&&e.disable!==!0&&Ke.value.length!==0){const O=Ke.value.map(T=>q("option",{value:T,selected:!0}));s.push(q("select",{class:"hidden",name:ne.value,multiple:e.multiple},O))}const x=e.useInput===!0||u!==!0?void 0:r.splitAttrs.attributes.value;return q("div",{class:"q-field__native row items-center",...x,...r.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[q(Qe,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:De.value})]:null}),It(r)}});export{En as Q,Ue as r};
